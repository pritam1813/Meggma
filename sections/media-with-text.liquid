{%- style -%}
  .section-{{ section.id }} {
    background-color: {{ section.settings.bg_color_outer }};
    padding-top: 40px;
    padding-bottom: 40px;
  }

  .inner-card-{{ section.id }} {
    background-color: {{ section.settings.bg_color_inner }};
    color: {{ section.settings.text_color_body }};
  }

  .heading-{{ section.id }} {
    color: {{ section.settings.text_color_heading }};
  }

  .btn-{{ section.id }} {
    background-color: {{ section.settings.btn_bg_color }};
    color: {{ section.settings.btn_text_color }};
    transition: opacity 0.3s ease;
  }

  .btn-{{ section.id }}:hover {
    opacity: 0.9;
  }

  /* Initial state for GSAP animation */
  .gsap-fade-in {
    opacity: 0;
    transform: translateY(40px);
  }
{%- endstyle -%}

<section class="section-{{ section.id }}">
  <div class="w-full px-3 flex">
    <div class="inner-card-{{ section.id }} my-3 py-8 rounded-3xl flow-root relative w-full z-10">
      <div class="max-w-7xl mx-auto px-10 gsap-fade-in" id="animated-content-{{ section.id }}">
        {% comment %} Text Content Area {% endcomment %}
        <div id="texts" class="w-full flex flex-col justify-center mb-12 md:mb-16">
          <h2 class="heading-{{ section.id }} text-2xl mb-6 font-semibold">
            {{ section.settings.heading }}
          </h2>
          <div class="mb-6 text-start max-w-2xl">
            {{ section.settings.description }}
          </div>
          <div>
            {% if section.settings.button_label != blank %}
              <a
                href="{{ section.settings.button_link }}"
                class="btn-{{ section.id }} inline-block px-8 py-3 rounded no-underline"
              >
                {{ section.settings.button_label }}
              </a>
            {% endif %}
          </div>
        </div>

        {% comment %} Media/Images Area {% endcomment %}
        <div id="media" class="w-full flex flex-col md:flex-row justify-between items-start gap-6">
          <div class="relative rounded-xl flex flex-col justify-center overflow-hidden w-full md:w-1/3 mb-8 md:mb-0">
            {% if section.settings.image_1 != blank %}
              {{
                section.settings.image_1
                | image_url: width: 800
                | image_tag: loading: 'lazy', class: 'w-full h-full object-cover'
              }}
            {% else %}
              {{ 'image' | placeholder_svg_tag: 'w-full h-full bg-gray-200' }}
            {% endif %}
          </div>

          <div class="relative rounded-xl flex flex-col justify-center overflow-hidden w-full md:w-7/12">
            {% if section.settings.image_2 != blank %}
              {{
                section.settings.image_2
                | image_url: width: 1200
                | image_tag: loading: 'lazy', class: 'w-full h-full object-cover'
              }}
            {% else %}
              {{ 'collection-1' | placeholder_svg_tag: 'w-full h-full bg-gray-200' }}
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  (function () {
    function initMediaWithTextAnimations() {
      gsap.to('#animated-content-{{ section.id }}', {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: 'power2.out',
        scrollTrigger: {
          trigger: '#animated-content-{{ section.id }}',
          start: 'top 80%', // Animation starts when top of element hits 80% of viewport
          toggleActions: 'play none none reset', // play on enter, don't reverse
        },
      });
    }

    // Run when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initMediaWithTextAnimations);
    } else {
      initMediaWithTextAnimations();
    }
  })();
</script>

{% schema %}
{
  "name": "Media with Text",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Premium Quality"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>We believe elegance should leave a lighter footprint. Our products are crafted with ethical artistry and sustainable practices, offering comfort and style. Each piece is thoughtfully made and beautifully finished with care.</p>"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Small Image (Left)"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Large Image (Right)"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "bg_color_outer",
      "label": "Outer Background",
      "default": "#D1D5DB"
    },
    {
      "type": "color",
      "id": "bg_color_inner",
      "label": "Inner Card Background",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "text_color_heading",
      "label": "Heading Color",
      "default": "#292524"
    },
    {
      "type": "color",
      "id": "text_color_body",
      "label": "Body Text Color",
      "default": "#444444"
    },
    {
      "type": "color",
      "id": "btn_bg_color",
      "label": "Button Background",
      "default": "#D1D5DB"
    },
    {
      "type": "color",
      "id": "btn_text_color",
      "label": "Button Text Color",
      "default": "#FFFFFF"
    }
  ],
  "presets": [
    {
      "name": "Media with Text"
    }
  ]
}
{% endschema %}
